export class DiaryEntryModel {
  id: number = 0
  date: string = ''
  title: string = ''
  content: string = ''
  mood: string = 'ğŸ˜Š'
  studyTime: number = 0
  questionsAnswered: number = 0
  achievements: string[] = []
  tags: string[] = []
  createdAt: string = ''

  constructor() {
    const now = new Date()
    this.date = now.toISOString().split('T')[0]
    this.createdAt = now.toISOString()
  }

  // è·å–å¿ƒæƒ…è¡¨æƒ…
  getMoodEmoji(): string {
    return this.mood
  }

  // è·å–å¿ƒæƒ…åç§°
  getMoodName(): string {
    switch (this.mood) {
      case 'ğŸ˜Š': return 'å¼€å¿ƒ'
      case 'ğŸ˜': return 'ä¸€èˆ¬'
      case 'ğŸ˜”': return 'æ²®ä¸§'
      case 'ğŸ˜´': return 'ç–²æƒ«'
      case 'ğŸ¤”': return 'æ€è€ƒ'
      case 'ğŸ˜¤': return 'åŠªåŠ›'
      case 'ğŸ‰': return 'å…´å¥‹'
      default: return 'æœªçŸ¥'
    }
  }

  // è·å–å­¦ä¹ æ—¶é•¿æ–‡æœ¬
  getStudyTimeText(): string {
    if (this.studyTime === 0) return 'æœªè®°å½•'
    if (this.studyTime < 1) {
      return `${Math.round(this.studyTime * 60)}åˆ†é’Ÿ`
    }
    return `${this.studyTime.toFixed(1)}å°æ—¶`
  }

  // è·å–ç­”é¢˜æ•°é‡æ–‡æœ¬
  getQuestionsText(): string {
    return this.questionsAnswered > 0 ? `${this.questionsAnswered}é¢˜` : 'æœªç­”é¢˜'
  }

  // æ·»åŠ æ ‡ç­¾
  addTag(tag: string): void {
    if (tag.trim() && !this.tags.includes(tag.trim())) {
      this.tags.push(tag.trim())
    }
  }

  // ç§»é™¤æ ‡ç­¾
  removeTag(tag: string): void {
    const index = this.tags.indexOf(tag)
    if (index > -1) {
      this.tags.splice(index, 1)
    }
  }

  // æ·»åŠ æˆå°±
  addAchievement(achievement: string): void {
    if (achievement.trim() && !this.achievements.includes(achievement.trim())) {
      this.achievements.push(achievement.trim())
    }
  }

  // è·å–æ ¼å¼åŒ–çš„æ—¥æœŸ
  getFormattedDate(): string {
    const date = new Date(this.date)
    const year = date.getFullYear()
    const month = date.getMonth() + 1
    const day = date.getDate()
    return `${year}å¹´${month}æœˆ${day}æ—¥`
  }

  // è·å–æ˜ŸæœŸå‡ 
  getWeekday(): string {
    const date = new Date(this.date)
    const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­']
    return weekdays[date.getDay()]
  }
}